---
title: Miscellaneous Documentation
layout: documentation
---

<h1>Miscellaneous</h1>


<div id="hexToHL" class="docsection">
    <h2>
        <a href="#hexToHL">hexToHL</a>
    </h2>
    
    Converts a hexadecimal string to a number.
    
        <h3>Inputs</h3>
        
            <dl>
                
                <dt>HL</dt>
                <dd><p>String pointer</p></dt>
                
            </dl>
        
    
        <h3>Outputs</h3>
        
            <dl>
                
                <dt>HL</dt>
                <dd><p>Value</p></dt>
                
            </dl>
        
    
</div>

<div id="hexToA" class="docsection">
    <h2>
        <a href="#hexToA">hexToA</a>
    </h2>
    
    Converts a hexadecimal string to a number.
    
        <h3>Inputs</h3>
        
            <dl>
                
                <dt>HL</dt>
                <dd><p>String pointer</p></dt>
                
            </dl>
        
    
        <h3>Outputs</h3>
        
            <dl>
                
                <dt>A</dt>
                <dd><p>Value</p></dt>
                
            </dl>
        
    
</div>

<div id="cpHLDE" class="docsection">
    <h2>
        <a href="#cpHLDE">cpHLDE</a>
    </h2>
    
    Compares HL to DE.
    
        <h3>Output</h3>
        
            <p>Same as z80 CP instruction.</p>
        
    
</div>

<div id="cpHLBC" class="docsection">
    <h2>
        <a href="#cpHLBC">cpHLBC</a>
    </h2>
    
    Compares HL to BC.
    
        <h3>Output</h3>
        
            <p>Same as z80 CP instruction.</p>
        
    
</div>

<div id="cpBCDE" class="docsection">
    <h2>
        <a href="#cpBCDE">cpBCDE</a>
    </h2>
    
    Compares DE to BC.
    
        <h3>Output</h3>
        
            <p>Same as z80 CP instruction.</p>
        
    
</div>

<div id="stringLength" class="docsection">
    <h2>
        <a href="#stringLength">stringLength</a>
    </h2>
    
    Determines the length of a zero delimited string.
    
        <h3>Inputs</h3>
        
            <dl>
                
                <dt>HL</dt>
                <dd><p>String pointer</p></dt>
                
            </dl>
        
    
        <h3>Outputs</h3>
        
            <dl>
                
                <dt>BC</dt>
                <dd><p>String length</p></dt>
                
            </dl>
        
    
</div>

<div id="getBatteryLevel" class="docsection">
    <h2>
        <a href="#getBatteryLevel">getBatteryLevel</a>
    </h2>
    
    Determines the approximate battery level.
    
        <h3>Outputs</h3>
        
            <dl>
                
                <dt>B</dt>
                <dd><p>Battery level</p></dt>
                
            </dl>
        
    
        <h3>Notes</h3>
        
            <p>For 15MHz CPUs, B is a value from 0 to 4, where 0 is critical and 4 is full. For 6MHz CPUs, B is either 0 or 1, where 0 is critical and 1 is good.</p>
        
    
</div>

<div id="DEMulA" class="docsection">
    <h2>
        <a href="#DEMulA">DEMulA</a>
    </h2>
    
    Performs `HL = DE * A`
    
</div>

<div id="compareStrings" class="docsection">
    <h2>
        <a href="#compareStrings">compareStrings</a>
    </h2>
    
    Determines if two strings are equal.
    
        <h3>Inputs</h3>
        
            <dl>
                
                <dt>DE</dt>
                <dd><p>String pointer</p></dt>
                
                <dt>HL</dt>
                <dd><p>String pointer</p></dt>
                
            </dl>
        
    
        <h3>Outputs</h3>
        
            <dl>
                
                <dt>Z</dt>
                <dd><p>Set if equal, reset if not equal</p></dt>
                
            </dl>
        
    
</div>

<div id="stringCopy" class="docsection">
    <h2>
        <a href="#stringCopy">stringCopy</a>
    </h2>
    
    Copies a string.
    
        <h3>Inputs</h3>
        
            <dl>
                
                <dt>DE</dt>
                <dd><p>Destination</p></dt>
                
                <dt>HL</dt>
                <dd><p>String pointer</p></dt>
                
            </dl>
        
    
</div>

<div id="sort" class="docsection">
    <h2>
        <a href="#sort">sort</a>
    </h2>
    
    Sorts a specified array of numbers.
    
        <h3>Inputs</h3>
        
            <dl>
                
                <dt>DE</dt>
                <dd><p>Last element in array</p></dt>
                
                <dt>HL</dt>
                <dd><p>first element in array</p></dt>
                
            </dl>
        
    
        <h3>Notes</h3>
        
            <p>This routine is an in-place version of a radix sort, which has an O(k*n) runtime for k-bit numbers.  It also requires a smaller, fixed amount of stack space.</p>
        
    
</div>

<div id="div32By16" class="docsection">
    <h2>
        <a href="#div32By16">div32By16</a>
    </h2>
    
    Performs `ACIX = ACIX / DE`
    
        <h3>Outputs</h3>
        
            <dl>
                
                <dt>As described above, and</dt>
                <dd></dt>
                
                <dt>B</dt>
                <dd><p>0</p></dt>
                
                <dt>HL</dt>
                <dd><p>Remainder</p></dt>
                
            </dl>
        
    
</div>

<div id="sub16From32" class="docsection">
    <h2>
        <a href="#sub16From32">sub16From32</a>
    </h2>
    
    Performs `ACIX = ACIX - DE`
    
</div>

<div id="add16To32" class="docsection">
    <h2>
        <a href="#add16To32">add16To32</a>
    </h2>
    
    Performs `ACIX = ACIX + DE`
    
</div>

<div id="divHLByC" class="docsection">
    <h2>
        <a href="#divHLByC">divHLByC</a>
    </h2>
    
    Performs `HL = HL / C`
    
        <h3>Outputs</h3>
        
            <dl>
                
                <dt>A</dt>
                <dd><p>Remainder</p></dt>
                
                <dt>As described above, and</dt>
                <dd></dt>
                
            </dl>
        
    
</div>

<div id="divACByDE" class="docsection">
    <h2>
        <a href="#divACByDE">divACByDE</a>
    </h2>
    
    Performs `AC = AC / DE`
    
        <h3>Outputs</h3>
        
            <dl>
                
                <dt>As described above, and</dt>
                <dd></dt>
                
                <dt>HL</dt>
                <dd><p>Remainder</p></dt>
                
            </dl>
        
    
</div>

<div id="getBootCodeVersionString" class="docsection">
    <h2>
        <a href="#getBootCodeVersionString">getBootCodeVersionString</a>
    </h2>
    
    Gets the version string from the device's boot code.
    
        <h3>Outputs</h3>
        
            <dl>
                
                <dt>HL</dt>
                <dd><p>String pointer</p></dt>
                
            </dl>
        
    
        <h3>Notes</h3>
        
            <p>This allocates memory to hold the string. Deallocate it with <a href="system.html#free">free</a> when you no longer need it.</p>
        
    
</div>

<div id="rleCompress" class="docsection">
    <h2>
        <a href="#rleCompress">rleCompress</a>
    </h2>
    
    Compresses data using a simple Run-Length-Encoding scheme. All bytes in a compressed block are treated as literal, except the two following a sentinel byte (selected because of its low occurance in z80 code), which specify the length of the run and the byte to run with, respectively.
    
        <h3>Inputs</h3>
        
            <dl>
                
                <dt>DE</dt>
                <dd><p>Destination, cannot (yet) be the same location as original data</p></dt>
                
                <dt>HL</dt>
                <dd><p>Data to compress</p></dt>
                
                <dt>BC</dt>
                <dd><p>Size of uncompressed data</p></dt>
                
            </dl>
        
    
        <h3>Outputs</h3>
        
            <dl>
                
                <dt>BC</dt>
                <dd><p>Size of compressed data</p></dt>
                
                <dt>AF</dt>
                <dd><p>Destroyed</p></dt>
                
            </dl>
        
    
</div>

<div id="rleCalculateCompressedLength" class="docsection">
    <h2>
        <a href="#rleCalculateCompressedLength">rleCalculateCompressedLength</a>
    </h2>
    
    Calculates the size of data resulting from a compression, but does not actually compress anything.
    
        <h3>Inputs</h3>
        
            <dl>
                
                <dt>HL</dt>
                <dd><p>Data to compress</p></dt>
                
                <dt>BC</dt>
                <dd><p>Size of decompressed data</p></dt>
                
            </dl>
        
    
        <h3>Outputs</h3>
        
            <dl>
                
                <dt>BC</dt>
                <dd><p>Size of compressed data</p></dt>
                
                <dt>AF</dt>
                <dd><p>Destroyed</p></dt>
                
            </dl>
        
    
</div>

<div id="rleDecompress" class="docsection">
    <h2>
        <a href="#rleDecompress">rleDecompress</a>
    </h2>
    
    Decompresses data compressed with the algorithm used by the kernel routine rleCompress.  See its documentation for algorithm details.
    
        <h3>Inputs</h3>
        
            <dl>
                
                <dt>DE</dt>
                <dd><p>Destination, cannot be the same location as original data</p></dt>
                
                <dt>HL</dt>
                <dd><p>Data to decompress</p></dt>
                
                <dt>BC</dt>
                <dd><p>Size of compressed data</p></dt>
                
            </dl>
        
    
        <h3>Outputs</h3>
        
            <dl>
                
                <dt>BC</dt>
                <dd><p>Size of decompressed data</p></dt>
                
                <dt>AF</dt>
                <dd><p>Destroyed</p></dt>
                
            </dl>
        
    
</div>

<div id="rleCalculateDecompressedLength" class="docsection">
    <h2>
        <a href="#rleCalculateDecompressedLength">rleCalculateDecompressedLength</a>
    </h2>
    
    Calculates the size of data resulting from a decompression, but does not actually decompress anything.
    
        <h3>Inputs</h3>
        
            <dl>
                
                <dt>HL</dt>
                <dd><p>Data to decompress</p></dt>
                
                <dt>BC</dt>
                <dd><p>Size of compressed data</p></dt>
                
            </dl>
        
    
        <h3>Outputs</h3>
        
            <dl>
                
                <dt>BC</dt>
                <dd><p>Size of decompressed data</p></dt>
                
                <dt>AF</dt>
                <dd><p>Destroyed</p></dt>
                
            </dl>
        
    
</div>

<div id="randA" class="docsection">
    <h2>
        <a href="#randA">randA</a>
    </h2>
    
    Returns a random byte in A.
    
        <h3>Inputs</h3>
        
            <dl>
                
                <dt>A'</dt>
                <dd><p>seed</p></dt>
                
            </dl>
        
    
        <h3>Outputs</h3>
        
            <dl>
                
                <dt>A</dt>
                <dd><p>random byte</p></dt>
                
                <dt>A'</dt>
                <dd><p>reseeded</p></dt>
                
            </dl>
        
    
</div>
